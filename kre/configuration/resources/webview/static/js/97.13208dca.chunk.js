"use strict";(self.webpackChunkkatalon_webview=self.webpackChunkkatalon_webview||[]).push([[97],{13766:(e,t,s)=>{s.r(t),s.d(t,{default:()=>De});var n=s(47313),a=s(2135);const o=s.p+"static/media/banner-header-icon.6eb99bc3f8186f3bd7241d2de03faba5.svg";const c=s.p+"static/media/banner-content-icon-1.5a3a1aad90d99a65e3bea3f9ea458631.svg";const i=s.p+"static/media/banner-content-icon-2.90b163df00c201a5cce6e4a37ec2f515.svg";const r=s.p+"static/media/banner-content-icon-3.a994ae559743fb3d0c3b24b69314b0df.svg";var l=s(46417);const d=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"chat-banner-header",children:[(0,l.jsx)("img",{className:"chat-banner-header-icon",src:o,alt:"BannerHeaderIcon"}),(0,l.jsxs)("div",{className:"chat-banner-header-title",children:[(0,l.jsx)("p",{className:"chat-banner-header-title-first-line",children:"Hi! I'm StudioAssist!"}),(0,l.jsx)("p",{className:"chat-banner-header-title-second-line",children:"How can I help you today?"})]})]}),(0,l.jsxs)("div",{className:"chat-banner-content",children:[(0,l.jsx)("span",{className:"chat-banner-content-title",children:"You can chat with me to:"}),(0,l.jsxs)("div",{className:"chat-banner-content-row",children:[(0,l.jsx)("img",{className:"chat-banner-icon",src:c,alt:"BannerIcon1"}),(0,l.jsx)("span",{children:"Ask about testing in Studio"})]}),(0,l.jsxs)("div",{className:"chat-banner-content-row",children:[(0,l.jsx)("img",{className:"chat-banner-icon",src:i,alt:"BannerIcon2"}),(0,l.jsx)("span",{children:"Generate a test script"})]}),(0,l.jsxs)("div",{className:"chat-banner-content-row",children:[(0,l.jsx)("img",{className:"chat-banner-icon",src:r,alt:"BannerIcon3"}),(0,l.jsx)("span",{children:"Explain your code"})]})]})]});var u=s(52301);const h=s.p+"static/media/send-icon.92b3e28e6cd249e9e4f4e86330b80744.svg";const p=s.p+"static/media/send-disable-icon.e764a4929f33d6c9f3f690562a9fa103.svg";const m=s.p+"static/media/project-context-icon.bc3dbec4e4c16821fa37651114d0c9c4.svg";const v=s.p+"static/media/ai-model-icon.afaba2844d61de614dfdd7cf7526b3bd.svg";const g=s.p+"static/media/configuration-icon.4a3eedf379cea3935a7b76385ae15ab6.svg";var E=s(27072);const N={WAITING:"WAITING",STOP:"STOP",INLINE_ERROR:"INLINE_ERROR",INLINE_BLACK:"INLINE_BLACK"};class I{static generateRequestBodyForAsking(e,t,s){return{conversationId:e,questionContent:t,attachments:s}}static generateRequestBodyForAccepting(e,t,s,n,a){return{conversationId:e,questionMsgId:t,attachments:s,questionContent:n,answerContent:a}}static generateRequestBodyForRejecting(e,t,s,n,a){return{conversationId:e,questionMsgId:t,attachments:s,questionContent:n,answerContent:a}}static generateRequestBodyForStopping(e,t){return{conversationId:e,questionMsgId:t}}static generateRequestBodyForClearing(e){return{conversationId:e}}static generateRequestBodyForToggleIncludeFocusingFile(e){return{includeFocusingFile:e}}static generateRequestBodyForAddAttachment(e,t){return{attachFrom:e,currentAttachedNumber:t}}static parseAnswerFromKatalonStudio(e){var t,s,n,a;return(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.type)===N.INLINE_ERROR?{type:"answer",content:null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.errorMessage,answerType:N.INLINE_ERROR}:(null===e||void 0===e||null===(s=e.error)||void 0===s?void 0:s.type)===N.INLINE_BLACK?{type:"answer",content:null===e||void 0===e||null===(a=e.error)||void 0===a?void 0:a.errorMessage,answerType:N.INLINE_BLACK}:{type:"answer",content:e.answerContent,answerType:N.INLINE_BLACK}}static generateStoppedAnswer(){return{type:"answer",content:"You\u2019ve stopped the response.",answerType:N.STOP}}static generateTimeoutAnswer(){return{type:"answer",content:"It took a bit longer than expected to find your answer. Please try again.",answerType:N.INLINE_ERROR}}}var A=s(33711),R=s(42337);const f="ask-question",x="cancel-question",C="accept-answer",j="reject-answer",O="clear-conversation",T="rate",b="request-ai-access",S="open-ai-setting",_="check-status",w="tracking",y="page-load-completed",L="toggle-include-focusing-file";class k{static setPort(e){this.port=e}static getBaseUrl(){return this.port?"http://127.0.0.1:".concat(this.port,"/studio-assist-chat"):R.Z.StudioAssistChat}static post(e,t){return A.Z.post("".concat(this.getBaseUrl(),"/").concat(e),t)}static askQuestion(e){return this.post(f,e)}static cancelQuestion(e){return this.post(x,e)}static acceptAnswer(e){return this.post(C,e)}static rejectAnswer(e){return this.post(j,e)}static clearConversation(e){return this.post(O,e)}static rateLatestAnswer(e,t,s){return this.post(T,{thumb:e,conversationId:t,latestQuestionId:s})}static requestAIAccess(){return this.post(b)}static openAISetting(){return this.post(S)}static checkStatus(){return this.post(_)}static tracking(e){return this.post(w,e)}static pageLoadCompleted(){return this.post(y)}static toggleIncludeFocusingFile(e){return this.post(L,e)}static addAttachment(e){return this.post("add-attachment",e)}}k.port=null;const F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;if(e.length>t){const s=Math.floor((t-3)/2);return e.substring(0,s)+"..."+e.substring(e.length-s)}return e};const P=s.p+"static/media/test_case.8a5049e89a2ecd7af6dc6a940ddd4f52.svg";const D=s.p+"static/media/test_suite.b99f5b7b13545000efdcd8de8305c716.svg";const B=s.p+"static/media/new_ws_test_object.06b57c4e063445346c8bbc0efd0d94bd.svg";const U=s.p+"static/media/feature.5d2bf59f1d53ae1c29b0209cd152bee7.svg";const M=s.p+"static/media/keyword_perspective.94c08c689829c7c370a2fdfa11474747.svg";const q=s.p+"static/media/profile_16.9dafa5f14386ebc27ed02683b346f030.svg";const W=s.p+"static/media/other_16.49e81adff408d947f62e6f04d4cf33d8.svg";const V=s.p+"static/media/error-state.97297db71d3fad8f07df102b0540fdd1.svg",K=e=>{let{fileType:t,isError:s}=e;return(0,l.jsx)("img",{className:"chat-context-icon",src:function(e,t){if(t)return V;switch(e){case"TEST_CASE":return P;case"TEST_SUITE":case"DYNAMIC_TEST_SUITE":return D;case"WEB_SERVICE_OBJECT":return B;case"LISTENER":case"STEP_DEFINITION":case"GROOVY":case"JAVA":case"CUSTOM_KEYWORD":return M;case"FEATURE_FILE":return U;case"PROFILE":return q;default:return W}}(t,s),alt:"Attachment Icon"})},G=(0,n.createContext)({attachments:[],focusingFile:null,allowAttachFromProject:!1,removeAttachment:()=>{}}),H=e=>{var t;let{isIncludeFocusingFileEnabled:s,setInCludeFocusingFileEnabled:a}=e;const{focusingFile:o}=(0,n.useContext)(G);if(!o)return null;const c=null===o||void 0===o?void 0:o.filePath.split(/[\\|/]+/);var i=null===c||void 0===c?void 0:c.at(-1);const r=null===(t=i)||void 0===t?void 0:t.lastIndexOf(".");var d;-1!==r&&(i=null===(d=i)||void 0===d?void 0:d.substring(0,r));const u=void 0===(null===o||void 0===o?void 0:o.status)||"VALID"===(null===o||void 0===o?void 0:o.status);return(0,l.jsx)("div",{className:"attachment ".concat(u?"":"attachment-error"),children:(0,l.jsx)(E.Z,{title:(e=>{switch(null===e||void 0===e?void 0:e.status){case"NOT_EXIST":return"File not found. Please re-attach the file.";case"UNSUPPORTED":return"Invalid file type. Please select text files only.";case"TOO_LARGE":return"File size exceeds the 10MB limit";default:return i}})(o),placement:"top-start",followCursor:!0,children:(0,l.jsxs)("div",{className:"attachment-content",children:[(0,l.jsx)(K,{fileType:null===o||void 0===o?void 0:o.fileType,isError:!u}),(0,l.jsx)("strong",{style:{whiteSpace:"nowrap",paddingRight:"2px"},children:"Current file: "}),(0,l.jsx)("span",{className:"attachment-name ".concat(s?null:"focusing-file-unchecked"),children:i&&F(i,24)}),(0,l.jsx)("input",{type:"checkbox",onChange:e=>{const t=e.target.checked;a(t);const s=I.generateRequestBodyForToggleIncludeFocusingFile(t);k.toggleIncludeFocusingFile(s)},checked:s})]})})})};var Z=s(48219),Y=s(11572),z=s(81223),Q=s(1645),J=s(24657);const X=s.p+"static/media/attach-file-icon.222576f55223b8bde31a9e4b7c94a1bc.svg";const $=s.p+"static/media/attach-file-disable-icon.4e9af6b179687f1c6ebf794a56e6c7e6.svg",ee={ACTION:{key:"studioassist_chat_action",value:{SEND_QUESTION:"SEND_QUESTION",FILE_ATTACHMENT:"FILE_ATTACHMENT",COPY_ANSWER:"COPY_ANSWER",COPY_CODE:"COPY_CODE",REQUEST_ACCESS:"REQUEST_ACCESS",OPEN_SETTINGS:"OPEN_SETTINGS",RETRY:"RETRY",RELOAD:"RELOAD",CLEAR_CONVERSATION:"CLEAR_CONVERSATION",STOP_GENERATING:"STOP_GENERATING",CLICK_FOLLOW_UP:"CLICK_FOLLOW_UP"}},ANSWER_SUCCESS:{key:"studioassist_answer_success",value:{TRUE:!0,FALSE:!1}},ERROR:{key:"studioassist_error",value:{GENERAL_ERROR:"GENERAL_ERROR",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",VIOLATION_ERROR:"VIOLATION_ERROR",TIMEOUT_ERROR:"TIMEOUT_ERROR",JSON_PARSE_ERROR:"JSON_PARSE_ERROR",TOKEN_EXCEEDED_ERROR:"TOKEN_EXCEEDED_ERROR",NO_ANSWER_FROM_LLM_ERROR:"NO_ANSWER_FROM_LLM_ERROR",FEATURE_DISABLED_ERROR:"FEATURE_DISABLED_ERROR",INCOMPATIBLE_AI_MODEL_ERROR:"INCOMPATIBLE_AI_MODEL_ERROR"},codeToValue:{I1001:"GENERAL_ERROR",I1002:"AUTHENTICATION_ERROR",I1003:"VIOLATION_ERROR",I1004:"TIMEOUT_ERROR",I1005:"JSON_PARSE_ERROR",I1006:"TOKEN_EXCEEDED_ERROR",I1007:"NO_ANSWER_FROM_LLM_ERROR",C2001:"FEATURE_DISABLED_ERROR",C2003:"INCOMPATIBLE_AI_MODEL_ERROR"},getValueFromCode(e){return this.value[this.codeToValue[e]]}}},te=()=>{const[e]=(0,a.lr)(),t=e.get("shouldDisplayAttachmentBadge"),{attachments:s,allowAttachFromProject:o}=(0,n.useContext)(G),[c,i]=(0,n.useState)(!1),[r,d]=(0,n.useState)("true"===t),u=(0,Z.ZP)(Y.Z)((e=>{var t;let{theme:s}=e;return{"& .MuiBadge-badge":{right:25,top:-3,border:"2px solid ".concat((null!==(t=s.vars)&&void 0!==t?t:s).palette.background.paper),borderRadius:1,padding:"0 4px",background:"#FED730",fontWeigth:"bold"}}}));return(0,l.jsx)(Q.ZP,{variant:"popover",popupId:"attachment-options",children:e=>(0,l.jsxs)("div",{children:[(0,l.jsx)(E.Z,{title:"Add up to 10 text files, max 10MB each",placement:"top-end",slotProps:{tooltip:{style:{fontWeight:"normal"}}},children:(0,l.jsx)("button",{disabled:c,className:"attach-file-button",...(0,J.vW)(e),onClick:t=>((e,t)=>{null===t||void 0===t||t.open(e),k.tracking([ee.ACTION.key,ee.ACTION.value.FILE_ATTACHMENT])})(t,e),children:(0,l.jsx)(u,{badgeContent:"New",invisible:!r,children:(0,l.jsx)("img",{src:c?$:X,alt:"Add files"})})})}),(0,l.jsx)(z.ZP,{...(0,J.ZW)(e),anchorOrigin:{vertical:"top",horizontal:"end"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:(0,l.jsxs)("div",{className:"attachment-options",children:[o&&(0,l.jsx)("button",{className:"attachment-option",onClick:()=>(e=>{d(!1);const t=I.generateRequestBodyForAddAttachment("FROM_PROJECT",s.length);k.addAttachment(t),k.tracking([ee.ACTION.key,ee.ACTION.value.FILE_ATTACHMENT,"attach_from","project"]),null===e||void 0===e||e.close()})(e),children:"Select from project"}),(0,l.jsx)("button",{className:"attachment-option",onClick:()=>(e=>{d(!1);const t=I.generateRequestBodyForAddAttachment("FROM_COMPUTER",s.length);k.addAttachment(t),k.tracking([ee.ACTION.key,ee.ACTION.value.FILE_ATTACHMENT,"attach_from","computer"]),null===e||void 0===e||e.close()})(e),children:"Upload from computer"})]})})]})})};var se=s(54070),ne=s(4058);const ae=e=>{let{attachment:t}=e;const{removeAttachment:s}=(0,n.useContext)(G),a=null===t||void 0===t?void 0:t.filePath.split(/[\\|/]+/);var o=null===a||void 0===a?void 0:a.at(-1);if("FOCUSING_FILE"===(null===t||void 0===t?void 0:t.fileSource)||"OTHER"!==(null===t||void 0===t?void 0:t.fileType)){const e=o.lastIndexOf(".");-1!==e&&(o=o.substring(0,e))}const c=F(o),i=void 0===(null===t||void 0===t?void 0:t.status)||"VALID"===(null===t||void 0===t?void 0:t.status);return(0,l.jsx)("div",{className:"attachment ".concat(i?"":"attachment-error"),children:(0,l.jsx)(E.Z,{title:(e=>{switch(null===e||void 0===e?void 0:e.status){case"NOT_EXIST":return"File not found. Please re-attach the file.";case"UNSUPPORTED":return"Invalid file type. Please select text files only.";case"TOO_LARGE":return"File size exceeds the 10MB limit";default:return o}})(t),placement:"top-start",followCursor:!0,children:(0,l.jsxs)("div",{className:"attachment-content",children:[(0,l.jsx)(K,{fileType:null===t||void 0===t?void 0:t.fileType,isError:!i}),(0,l.jsx)("span",{className:"attachment-name",children:c}),(0,l.jsx)(se.Z,{className:"attachment-close-button","aria-label":"remove",size:"small",onClick:()=>s(t),children:(0,l.jsx)(ne.Z,{fontSize:"small"})})]})})})};const oe=s.p+"static/media/chevron-left.58b933120309e2aabe1948c0d44659ce.svg";const ce=s.p+"static/media/chevron-right.80e7d4fa73db263db509b8537cf0c6b3.svg",ie=e=>{let{children:t,maxRows:s=1}=e;const a=(0,n.useRef)(null),[o,c]=(0,n.useState)(!1),[i,r]=(0,n.useState)(!1),[d,u]=(0,n.useState)([[]]),[h,p]=(0,n.useState)(0),[m,v]=(0,n.useState)(!1),g=(0,n.useMemo)((()=>n.Children.toArray(t)),[t]),E=(0,n.useCallback)((()=>{if(!a.current||!g)return u([[]]),void p(0);if(!m)return u([g]),void p(1);const e=[];let t=0;const n=Math.ceil(g.length/s);for(;t<g.length&&e.length<s;)e.push(g.slice(t,t+n)),t+=n;u(e),p(e.length)}),[g,s,m]),N=(0,n.useCallback)((()=>{const e=a.current;if(!e)return;c(e.scrollLeft>0),r(e.scrollLeft+e.clientWidth<e.scrollWidth);const t=s>1&&124*g.length>e.clientWidth;v(t)}),[g.length,s]);(0,n.useEffect)((()=>{E()}),[E]),(0,n.useEffect)((()=>{const e=requestAnimationFrame((()=>{N()}));return()=>cancelAnimationFrame(e)}),[N,d]),(0,n.useEffect)((()=>{const e=a.current;if(e)return e.addEventListener("scroll",N),window.addEventListener("resize",E),window.addEventListener("resize",N),()=>{e.removeEventListener("scroll",N),window.removeEventListener("resize",E),window.removeEventListener("resize",N)}}),[E,N]);return(0,l.jsxs)("div",{className:"scroll-buttons",children:[o&&(0,l.jsx)("button",{onClick:()=>{const e=a.current;e&&e.scrollBy({left:-200,behavior:"smooth"})},className:"scroll-button",children:(0,l.jsx)("img",{className:"scroll-button-icon",src:oe,alt:"Scroll Left"})}),(0,l.jsx)("div",{className:"horizontal-scroll-container",ref:a,style:{gridTemplateRows:"repeat(".concat(h,", 1fr)")},children:d.map(((e,t)=>(0,l.jsx)("div",{className:"carousel-row",children:e.map(((e,t)=>(0,l.jsx)("div",{className:"carousel-item",children:e},t)))},t)))}),i&&(0,l.jsx)("button",{onClick:()=>{const e=a.current;e&&e.scrollBy({left:200,behavior:"smooth"})},className:"scroll-button",children:(0,l.jsx)("img",{className:"scroll-button-icon",src:ce,alt:"Scroll Right"})})]})};const re=10,le=(0,n.forwardRef)(((e,t)=>{const{value:s,studioAssistConfigType:a,isDisabled:o,projectContext:c,onChange:i,onSend:r,onOpenAISetting:d,isIncludeFocusingFileEnabled:N,setInCludeFocusingFileEnabled:I}=e,A=e=>{const t=null===e||void 0===e?void 0:e.filter((e=>void 0!==e.status&&"VALID"!==e.status));return(null===t||void 0===t?void 0:t.length)>0||(null===e||void 0===e?void 0:e.length)>re},{attachments:R,focusingFile:f}=(0,n.useContext)(G),x=o||""===s.trim()||A(R),C=void 0!==c&&c.length>0;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"chat-context-description",children:[a&&(0,l.jsxs)("div",{className:"tooltip-container",children:[(0,l.jsx)("img",{className:"chat-context-icon",src:v,alt:"AI Model"}),(0,l.jsx)("div",{placement:"top-start",children:a})]}),C&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"tooltip-separator",children:"|"}),(0,l.jsxs)("div",{className:"tooltip-container",children:[(0,l.jsx)("img",{className:"chat-context-icon",src:m,alt:"Project Context"}),(0,l.jsx)(E.Z,{title:(0,l.jsx)("div",{style:{whiteSpace:"pre-line"},children:null===c||void 0===c?void 0:c.join("\n")}),slotProps:{tooltip:{style:{fontWeight:"normal"}}},placement:"top-start",children:"Project context (".concat(c.length,")")})]})]}),(0,l.jsx)("div",{className:"context-container",children:(0,l.jsx)(E.Z,{title:"Settings",placement:"top-start",slotProps:{tooltip:{style:{fontWeight:"normal"}}},children:(0,l.jsx)("button",{onClick:d,className:"context-button",children:(0,l.jsx)("img",{className:"context-button-icon",src:g,alt:"Settings"})})})})]}),(0,l.jsxs)("div",{className:"chat-input ".concat(x&&"disabled"),children:[(0,l.jsxs)(ie,{maxRows:2,children:[(null===f||void 0===f?void 0:f.filePath)&&(0,l.jsx)(H,{isIncludeFocusingFileEnabled:N,setInCludeFocusingFileEnabled:I}),null===R||void 0===R?void 0:R.map(((e,t)=>(0,l.jsx)(ae,{attachment:e},t)))]}),(null===R||void 0===R?void 0:R.length)>re&&(0,l.jsx)("p",{className:"attachment-error-message",children:"Maximum limit of 10 files exceeded."}),(0,l.jsxs)("div",{className:"input-area",children:[(0,l.jsx)(u.Z,{ref:t,value:s,onChange:i,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),x||r())},minRows:1,maxRows:16,placeholder:"Type something",className:"textarea-input"}),(0,l.jsxs)("div",{className:"input-area-right",children:[(0,l.jsx)(te,{}),(0,l.jsx)(E.Z,{title:""===s.trim()?"Enter your question to continue":(null===R||void 0===R?void 0:R.length)>re?"Maximum limit of ".concat(re," files exceeded."):A(R)?"Remove error files to continue":"",placement:"top-start",slotProps:{tooltip:{style:{fontWeight:"normal"}}},children:(0,l.jsx)("button",{onClick:r,disabled:x,className:"send-button",children:(0,l.jsx)("img",{src:x?p:h,alt:"Send Icon"})})})]})]})]}),(0,l.jsx)("p",{className:"reminder",children:"StudioAssist uses AI. Check for mistakes."})]})}));var de=s(99901);const ue=e=>{let{question:t,attachments:s}=e;const n=e=>{const t=null===e||void 0===e?void 0:e.filePath;if(void 0===t)return"";var s=t.split(/[\\|/]+/).at(-1);if("FOCUSING_FILE"===(null===e||void 0===e?void 0:e.fileSource)||"OTHER"!==(null===e||void 0===e?void 0:e.fileType)){const e=s.lastIndexOf(".");-1!==e&&(s=s.substring(0,e))}return s},a=e=>{const t=n(e);return F(t)};return(0,l.jsxs)("div",{className:"chat-question",children:[t,(0,l.jsx)(de.Z,{direction:"row",spacing:1,children:(0,l.jsx)(ie,{children:s&&s.map(((e,t)=>(0,l.jsx)("div",{className:"attachment attachment-content",children:(0,l.jsx)(E.Z,{title:n(e),placement:"top-start",children:(0,l.jsxs)("div",{className:"attachment-content",children:[(0,l.jsx)(K,{fileType:null===e||void 0===e?void 0:e.fileType}),(0,l.jsx)("span",{className:"attachment-name",children:a(e)})]})})},t)))})})]})};const he=s.p+"static/media/answer-from-ai-icon.1f42feadb0c28f0475ed4259a98f56b0.svg";const pe=s.p+"static/media/stop-icon.7ef64d813bd603971c9a021794c46aff.svg";const me=s.p+"static/media/stop-hover-icon.eca70a17769310b559f73c54e6a06a5d.svg";var ve=s(1774),ge=s(14108),Ee=s(9362),Ne=s(21903);const Ie=s.p+"static/media/copy-icon.fc649a6ee3c4509a04e7bc2c9d822b69.svg";const Ae=s.p+"static/media/copy-hover-icon.e810d76e9d3195c2555c102f1cbcded9.svg",Re=e=>{let{text:t,isCodeSnippet:s,conversationId:a}=e;const[o,c]=(0,n.useState)("Copy");return(0,l.jsxs)("button",{className:"copy-button",onClick:()=>{var e;if(null!==(e=navigator.clipboard)&&void 0!==e&&e.writeText)navigator.clipboard.writeText(t);else{const e=Object.assign(document.createElement("textarea"),{value:t});document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}c("Copied"),setTimeout((()=>c("Copy")),1e3),k.tracking([ee.ACTION.key,s?ee.ACTION.value.COPY_CODE:ee.ACTION.value.COPY_ANSWER,"conversation_ID",a])},children:[(0,l.jsx)("img",{src:Ie,alt:"CopyIcon",className:"default-copy-icon"}),(0,l.jsx)("img",{src:Ae,alt:"CopyIconHover",className:"hover-copy-icon"}),(0,l.jsx)("span",{className:"tooltip",children:o})]})};const fe=s.p+"static/media/error-state.b519450d87a2a417030b21e5edb3b15d.svg";s(11639);const xe=e=>{let{answer:t,answerType:s,onStop:n,processingStatusMessage:a,conversationId:o}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"chat-answer",children:[(0,l.jsxs)("div",{className:"answer-header",children:[(0,l.jsx)("img",{className:"answer-header-icon",src:he,alt:"AnswerFromAIIcon"}),(0,l.jsx)("span",{className:"answer-header-title",children:"StudioAssist"}),s===N.INLINE_BLACK&&(0,l.jsx)(Re,{text:t,isCodeSnippet:!1,conversationId:o}),s===N.INLINE_ERROR&&(0,l.jsx)("img",{src:fe,alt:"Error occurred",className:"error-state-icon"})]}),s===N.WAITING&&(0,l.jsxs)("div",{className:"answer-waiting",children:[(0,l.jsxs)("span",{className:"answer-waiting-title",children:[a,"..."]}),(0,l.jsx)("span",{className:"spinner"})]}),s===N.STOP&&(0,l.jsx)("div",{className:"answer-stop",children:t}),(s===N.INLINE_BLACK||s===N.INLINE_ERROR)&&(0,l.jsx)("div",{className:"answer-inline-black",children:(0,l.jsx)(ve.U,{remarkPlugins:[ge.Z],components:{code(e){let{node:t,inline:s,className:n,children:a,...c}=e;const i=/language-(\w+)/.exec(n||""),r=i?i[1]:"plaintext",d=String(a).replace(/\n$/,"");return!s&&i?(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"copy-code",children:[(0,l.jsx)("span",{children:r}),(0,l.jsx)(Re,{text:d,isCodeSnippet:!0,conversationId:o})]}),(0,l.jsx)(Ee.Z,{style:Ne.Z,language:r,PreTag:"div",customStyle:{margin:"0",padding:"8px",borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px",borderWidth:"0",backgroundColor:"#F4F4F4"},codeTagProps:{style:{fontFamily:"Roboto Mono",fontSize:"11px",fontWeight:"400",backgroundColor:"#F4F4F4"}},...c,children:d})]}):(0,l.jsx)("code",{className:n,...c,children:a})}},children:t})})]}),s===N.WAITING&&(0,l.jsxs)("button",{className:"stop-generation-button",onClick:n,children:[(0,l.jsx)("img",{src:pe,alt:"StopIcon",className:"default-stop-icon"}),(0,l.jsx)("img",{src:me,alt:"CopyIconHover",className:"hover-stop-icon"}),(0,l.jsx)("span",{className:"stop-generation-title",children:"Stop generation"})]})]})};const Ce=s.p+"static/media/like-icon.647679085abd3b3a4f7c0a77bb09fdcf.svg";const je=s.p+"static/media/dislike-icon.72ecad420145aadb6fc137ff2d774a26.svg",Oe=e=>{let{onRateGood:t,onRateBad:s}=e;return(0,l.jsxs)("div",{className:"rating-conversation",children:[(0,l.jsx)("span",{children:"Is this answer helpful?"}),(0,l.jsxs)("div",{className:"rating-button-group",children:[(0,l.jsxs)("button",{onClick:t,className:"rating-button",children:[(0,l.jsx)("img",{src:Ce,alt:"LikeIcon",className:"rating-icon"}),(0,l.jsx)("span",{children:"Good"})]}),(0,l.jsx)("span",{className:"rating-sperator",children:"|"}),(0,l.jsxs)("button",{onClick:s,className:"rating-button",children:[(0,l.jsx)("img",{src:je,alt:"DislikeIcon",className:"rating-icon"}),(0,l.jsx)("span",{children:"Not Relevant"})]})]})]})};const Te=s.p+"static/media/reload-icon.e2ff9d6e1490e2f3bfcd33a892364e77.svg";const be=s.p+"static/media/reload-hover-icon.b01bb2503d53547a7c62af6ce850ac8e.svg";const Se=s.p+"static/media/clear-icon.bde952fef96f140d0aad739e0a491d5f.svg";const _e=s.p+"static/media/clear-hover-icon.c790343ccf7990efdd9657b672a29399.svg",we=e=>{let{hasRetry:t,onRetry:s,onClear:n}=e;return(0,l.jsxs)("div",{className:"retry-and-clear",children:[t&&(0,l.jsxs)("button",{className:"retry-button",onClick:s,children:[(0,l.jsx)("img",{src:Te,alt:"RetryIcon",className:"default-retry-icon"}),(0,l.jsx)("img",{src:be,alt:"RetryHoverIcon",className:"hover-retry-icon"}),(0,l.jsx)("span",{className:"retry-title",children:"Retry"})]}),(0,l.jsxs)("button",{className:"clearing-conversation-button",onClick:n,children:[(0,l.jsx)("img",{src:Se,alt:"ClearIcon",className:"default-clear-icon"}),(0,l.jsx)("img",{src:_e,alt:"ClearHoverIcon",className:"hover-clear-icon"}),(0,l.jsx)("span",{className:"clear-title",children:"Clear conversation"})]})]})},ye={INTERNET_DISCONNECTED:"INTERNET_DISCONNECTED",ACCOUNT_LEVEL_AI_DISABLED:"ACCOUNT_LEVEL_AI_DISABLED",LLM_MODEL_UNSUPPORTED:"LLM_MODEL_UNSUPPORTED",UNAVAILABLE:"UNAVAILABLE",AVAILABLE:"AVAILABLE"},Le=e=>{let{status:t,isDisplayBorderTop:s,isOfflineOrOP:n,onRequestAIAccess:a,onOpenAISetting:o,onReload:c}=e;return(0,l.jsxs)(l.Fragment,{children:[t===ye.INTERNET_DISCONNECTED&&(0,l.jsxs)("div",{className:"error-component ".concat(s&&"border-top"),children:[(0,l.jsx)("p",{className:"error-component-title",children:"You're Offline"}),(0,l.jsx)("p",{children:"Please check your internet connection"}),(0,l.jsx)("p",{children:"or proxy to continue."})]}),t===ye.ACCOUNT_LEVEL_AI_DISABLED&&(0,l.jsxs)("div",{className:"error-component ".concat(s&&"border-top"),children:[(0,l.jsx)("p",{className:"error-component-title",children:"There is no AI model in your account"}),n?(0,l.jsx)("p",{children:"To get started, you can add your OpenAI/Azure API key."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:"Please contact your Account Owner for access,"}),(0,l.jsx)("p",{children:"or add your OpenAI/Azure API key."})]}),(0,l.jsxs)("div",{className:"ai-disabled",children:[!n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:"ai-disabled-button",onClick:a,children:"Request access"}),(0,l.jsx)("span",{className:"ai-disabled-title",children:"\xa0\xa0or\xa0\xa0"})]}),(0,l.jsx)("button",{className:"ai-disabled-button",onClick:o,children:"Add your API key"})]})]}),t===ye.LLM_MODEL_UNSUPPORTED&&(0,l.jsxs)("div",{className:"error-component ".concat(s&&"border-top"),children:[(0,l.jsx)("p",{className:"error-component-title",children:"Incompatible AI Model"}),(0,l.jsx)("p",{children:"This model is not compatible with chat"}),(0,l.jsxs)("p",{children:["mode. Visit this ",(0,l.jsx)("a",{href:"https://docs.katalon.com/katalon-studio/create-test-cases/studioassist-chat-window",children:"doc"})," to check supported"]}),(0,l.jsx)("p",{children:"models and how to update your settings."}),(0,l.jsx)("div",{className:"ai-model-unsupported",children:(0,l.jsx)("button",{className:"ai-model-unsupported-button",onClick:o,children:"Go to Settings"})})]}),t===ye.UNAVAILABLE&&(0,l.jsxs)("div",{className:"error-component ".concat(s&&"border-top"),children:[(0,l.jsx)("p",{className:"error-component-title",children:"StudioAssist is currently unavailable"}),(0,l.jsx)("p",{children:"Please close and launch it again to continue."})]}),t!==ye.UNAVAILABLE&&(0,l.jsxs)("button",{className:"reload-button",onClick:c,children:[(0,l.jsx)("img",{src:Te,alt:"ReloadIcon",className:"default-reload-icon"}),(0,l.jsx)("img",{src:be,alt:"ReloadHoverIcon",className:"hover-reload-icon"}),(0,l.jsx)("span",{className:"reload-title",children:"Reload"})]})]})},ke={ASK:"ASK",RETRY:"RETRY",RELOAD:"RELOAD"},Fe=e=>{let{question:t,onClick:s}=e;return t=t.trim(),t?(0,l.jsxs)("div",{className:"follow-up-question-item",children:[(0,l.jsx)("img",{src:c,className:"follow-up-question-icon"}),(0,l.jsx)("span",{onClick:()=>s(t),children:t})]}):null},Pe=e=>{let{questions:t,onClickQuestion:s}=e;return(0,l.jsxs)("div",{className:"follow-up-questions",children:[(0,l.jsx)("span",{children:"You might want to explore:"}),null===t||void 0===t?void 0:t.map(((e,t)=>(0,l.jsx)(Fe,{question:e,onClick:s},t)))]})},De=()=>{const[e,t]=(0,n.useState)(null),[s,o]=(0,n.useState)([]),[c,i]=(0,n.useState)(""),[r,u]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[m,v]=(0,n.useState)(!1),[g,E]=(0,n.useState)(!1),[A,R]=(0,n.useState)(!1),[f,x]=(0,n.useState)(!1),[C,j]=(0,n.useState)(!1),[O,T]=(0,n.useState)(null),[b,S]=(0,n.useState)(null),[_,w]=(0,n.useState)(""),[y,L]=(0,n.useState)(null),[F,P]=(0,n.useState)(null),[D,B]=(0,n.useState)(null),[U,M]=(0,n.useState)(!1),[q,W]=(0,n.useState)(!1),[V,K]=(0,n.useState)([]),[H,Z]=(0,n.useState)([]),[Y]=(0,a.lr)(),z=(0,n.useRef)(null),[Q,J]=(0,n.useState)("");(0,n.useEffect)((()=>{const e=Y.get("status");t(e);const s=Y.get("port");s&&k.setPort(s);const n=Y.get("isIncludeFocusingFileEnabled");M("true"===n);const a=Y.get("isOfflineOrOP");u("true"===a);const o=Y.get("objectRepositoryProjectContextEnabled");p("true"===o);const c=Y.get("customKeywordProjectContextEnabled");v("true"===c);const i=Y.get("allowAttachFromProject");W("true"===i);const r=Y.get("studioAssistConfigType");r&&X(r)}),[Y]),(0,n.useEffect)((()=>{g||(null===y||void 0===y?void 0:y.filePath)===(null===D||void 0===D?void 0:D.filePath)||L(D)}),[g]);const X=e=>{J(e)},$=()=>{K([])};window.populateAnswer=async e=>{var t;if(g)if(null!==e&&void 0!==e&&null!==(t=e.error)&&void 0!==t&&t.type)ne(e);else try{const t=I.generateRequestBodyForAccepting(O,b,de(),_,null===e||void 0===e?void 0:e.answerContent);await k.acceptAnswer(t),$();const s=I.parseAnswerFromKatalonStudio(e);o((e=>[...e,s])),x(!0),E(!1),k.tracking([ee.ANSWER_SUCCESS.key,ee.ANSWER_SUCCESS.value.TRUE,...he(),...pe()])}catch(s){ae(s)}},window.updateConversationId=e=>{T(e)},window.updateExecutingStatus=e=>{switch(e){case"SYNC_CONTEXT":P("Synchronizing context");break;case"ANALYZE_FILE":P("Analyzing files");break;default:P("Generating response")}},window.updateProjectContext=(e,t,s)=>{p(e),v(t),W(s)},window.updateFocusingFile=e=>{B(e),g||(null===y||void 0===y?void 0:y.filePath)===(null===e||void 0===e?void 0:e.filePath)||L(e)},window.addAttachments=e=>{const t=[...V];e.forEach((e=>{t.find((t=>t.filePath===e.filePath&&t.fileType===e.fileType&&t.status===e.status))||t.push(e)})),K(t)},window.updateStudioAssistConfig=X,window.updateAttachmentsOnChangingProject=e=>{var t;const s=(null!==V&&void 0!==V?V:[]).filter((t=>{var s;return"OTHER"===t.fileType||""!==e&&(null===(s=t.filePath)||void 0===s?void 0:s.startsWith(e))}));K(s),null!==D&&void 0!==D&&null!==(t=D.filePath)&&void 0!==t&&t.startsWith(e)||B(null)},window.updateFollowUpQuestions=e=>{Z(e)},(0,n.useEffect)((()=>(se(),()=>{delete window.populateAnswer,delete window.updateConversationId,delete window.updateExecutingStatus,delete window.updateProjectContext,delete window.updateFocusingFile,delete window.addAttachments,delete window.updateStudioAssistConfig,delete window.updateAttachmentsOnChangingProject,delete window.updateFollowUpQuestions})),[]),(0,n.useEffect)((()=>{g&&z.current&&z.current.scrollIntoView({behavior:"smooth"})}),[s,g]);const te=()=>e===ye.INTERNET_DISCONNECTED||e===ye.ACCOUNT_LEVEL_AI_DISABLED||e===ye.LLM_MODEL_UNSUPPORTED||e===ye.UNAVAILABLE,se=()=>{k.pageLoadCompleted()},ne=async e=>{var s,n;const a=null===e||void 0===e||null===(s=e.error)||void 0===s?void 0:s.type;if(!a||a!==ye.INTERNET_DISCONNECTED&&a!==ye.ACCOUNT_LEVEL_AI_DISABLED&&a!==ye.LLM_MODEL_UNSUPPORTED){var c,i;const t=I.parseAnswerFromKatalonStudio(e);o((e=>[...e,t])),x(!1),j(null===e||void 0===e||null===(c=e.error)||void 0===c?void 0:c.retryEnabled),E(!1);const s=I.generateRequestBodyForRejecting(O,b,de(),_,null===e||void 0===e||null===(i=e.error)||void 0===i?void 0:i.errorMessage);await k.rejectAnswer(s)}else{var r;t(null===e||void 0===e||null===(r=e.error)||void 0===r?void 0:r.type),x(!1),E(!1)}(e=>{const t=ee.ERROR.getValueFromCode(e);if(t)try{k.tracking([ee.ERROR.key,t,...he(),...pe()])}catch(s){ae(s)}})(null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.errorCode),$()},ae=e=>{console.log("handleServiceException for error:",e),E(!1),t(ye.UNAVAILABLE)},oe=async(e,t,s)=>{s===ke.ASK&&(o((s=>[...s,{type:"question",content:e,attachments:t}])),i(""),w(e)),R(!0),x(!1),j(!1),E(!0),Z([]);try{var n;const a=I.generateRequestBodyForAsking(O,e,t),{data:o}=await k.askQuestion(a);null!==o&&void 0!==o&&null!==(n=o.error)&&void 0!==n&&n.type?ne(o):(S(null===o||void 0===o?void 0:o.questionMsgId),s===ke.ASK?k.tracking([ee.ACTION.key,ee.ACTION.value.SEND_QUESTION,"conversation_ID",null===o||void 0===o?void 0:o.conversationId,"question_ID",null===o||void 0===o?void 0:o.questionMsgId]):s===ke.RETRY?k.tracking([ee.ACTION.key,ee.ACTION.value.RETRY,"conversation_ID",null===o||void 0===o?void 0:o.conversationId,"question_ID",null===o||void 0===o?void 0:o.questionMsgId]):k.tracking([ee.ACTION.key,ee.ACTION.value.RELOAD,"conversation_ID",null===o||void 0===o?void 0:o.conversationId,"question_ID",null===o||void 0===o?void 0:o.questionMsgId]))}catch(a){ae(a)}},ce=async e=>{var t;o((e=>{const t=e.length-1;return t>=0&&"answer"===e[t].type?e.slice(0,t):e}));const n=s.length-1;var a;n>=0&&"question"===s[n].type&&(t=null===(a=s[n])||void 0===a?void 0:a.attachments);await oe(_,t,e)},ie=async e=>{try{await k.rateLatestAnswer(e,O,b),x(!1)}catch(t){ae(t)}},re=async()=>{try{await k.openAISetting(),k.tracking([ee.ACTION.key,ee.ACTION.value.OPEN_SETTINGS,...he(),...pe()])}catch(e){ae(e)}},de=()=>y&&U?[y,...V]:V,he=()=>["conversation_ID",O],pe=()=>["question_ID",b];return(0,l.jsxs)("div",{className:"studio-assist-chat",children:[!A&&(0,l.jsx)(d,{}),(0,l.jsxs)("div",{className:"chat-messages",children:[s.map(((e,t)=>"question"===e.type?(0,l.jsx)(ue,{question:e.content,attachments:e.attachments},t):(0,l.jsx)(xe,{answer:e.content,answerType:e.answerType,conversationId:O},t))),g&&(0,l.jsx)(xe,{answerType:N.WAITING,processingStatusMessage:F,onStop:async()=>{try{const e=I.generateRequestBodyForStopping(O,b);await k.cancelQuestion(e);const t=I.generateStoppedAnswer();o((e=>[...e,t])),E(!1),k.tracking([ee.ACTION.key,ee.ACTION.value.STOP_GENERATING,...he(),...pe()])}catch(e){ae(e)}}}),f&&(0,l.jsx)(Oe,{onRateGood:()=>ie(!0),onRateBad:()=>ie(!1)}),(null===H||void 0===H?void 0:H.length)>0&&(0,l.jsx)(Pe,{questions:H,onClickQuestion:e=>{i(e),oe(e,de(),ke.ASK),k.tracking([ee.ACTION.key,ee.ACTION.value.CLICK_FOLLOW_UP,...he(),...pe()])}}),A&&!g&&!te()&&(0,l.jsx)(we,{hasRetry:C,onRetry:()=>ce(ke.RETRY),onClear:async()=>{try{const e=I.generateRequestBodyForClearing(O);await k.clearConversation(e),o([]),i(""),R(!1),x(!1),j(!1),Z([]),k.tracking([ee.ACTION.key,ee.ACTION.value.CLEAR_CONVERSATION,...he(),...pe()])}catch(e){ae(e)}}}),te()&&(0,l.jsx)(Le,{status:e,isDisplayBorderTop:A,isOfflineOrOP:r,onRequestAIAccess:async()=>{try{await k.requestAIAccess(),k.tracking([ee.ACTION.key,ee.ACTION.value.REQUEST_ACCESS,...he(),...pe()])}catch(e){ae(e)}},onOpenAISetting:re,onReload:async()=>{try{const{data:e}=await k.checkStatus();t(null===e||void 0===e?void 0:e.status),(null===e||void 0===e?void 0:e.status)===ye.AVAILABLE&&A?await ce(ke.RELOAD):k.tracking([ee.ACTION.key,ee.ACTION.value.RELOAD,...he()])}catch(e){ae(e)}}}),(0,l.jsx)("div",{ref:z})]}),!te()&&(0,l.jsx)(G.Provider,{value:{allowAttachFromProject:q,attachments:V,focusingFile:D,removeAttachment:e=>{const t=V.filter((t=>t!==e));K(t)}},children:(0,l.jsx)(le,{value:c,studioAssistConfigType:Q,isDisabled:g,projectContext:((e,t)=>{var s=[];return e&&s.push("Object repository"),m&&s.push("Custom keywords"),s})(h),isIncludeFocusingFileEnabled:U,setInCludeFocusingFileEnabled:M,onOpenAISetting:re,onChange:e=>i(e.target.value),onSend:()=>oe(c,de(),ke.ASK)})})]})}},42337:(e,t,s)=>{function n(e){const[t,s]=e&&e.split("?")||[],[,n]=s&&s.split("#")||[];for(var a=arguments.length,o=new Array(a>1?a-1:0),c=1;c<a;c++)o[c-1]=arguments[c];return"".concat(t||"").concat(o?"/".concat(o.join("/")):"").concat(s?"?".concat(s):"").concat(n?"#".concat(n):"")}s.d(t,{Z:()=>g});const a=new URLSearchParams(window.location.search),o="".concat(window.location.protocol,"//").concat(window.location.host);let c=a.get("localApiServerUrl"),i=a.get("localApiServerProtocol"),r=a.get("localApiServerHostName"),l=a.get("localApiServerPort");c?c=decodeURIComponent(c):i&&r&&l&&(c="".concat(i,"://").concat(r,":").concat(l));const d=c||o,u=n(d,"content"),h=n(d,"info"),p=n(d,"tracking"),m=n(d,"action"),v=n(d,"template"),g={WebViewServer:d,KatalonContent:u,KatalonInfo:h,KatalonTracking:p,KatalonAction:m,KatalonTestOpsProjectInfo:n(d,"testOpsProjectInfo"),PricingPage:"https://www.katalon.com/pricing",SignupPage:"https://www.katalon.com/sign-up",HelpCenter:"https://katalon-inc.my.site.com/support/",Store:"https://store.katalon.com",Documentation:"https://docs.katalon.com/docs/katalon-studio/get-started/explore-katalon-studio",Academy:"https://academy.katalon.com/?utm_source=ks_app&utm_medium=header_icon&utm_campaign=inapp_promote",ForumPage:"https://forum.katalon.com",HTMLEmailTemplate:v,News:"https://katalon.com/resources-center/blog#news",BestPractices:"https://katalon.com/resources-center/blog#insights",ReleaseHighlights:"https://docs.katalon.com/katalon-studio/release-notes/katalon-studio-release-notes-version-10.x",Discussions:"https://forum.katalon.com/tag/katalon-studio",OnboardingHub:"https://katalon.com/onboarding-hub?ref=KSE",StudioAssistChat:n(d,"studio-assist-chat"),StudioCmsQuickLink:"https://studio-cms.katalon.com/start-page-quick-link".concat(window.location.search)}}}]);